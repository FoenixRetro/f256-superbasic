; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		silence.asm
;		Purpose:	Silence a channel
;		Created:	21st November 2022
;		Reviewed: 	No
;		Author:		Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

		.section code

; ************************************************************************************************
;
;									Silence a channel A
;
; ************************************************************************************************

SNDSilenceChannel:
		tax 								; zero time left.
		stz 	SNDTimeLeft,x
		;
		;		We do not remove queued entries for this channel because cannot currently silence
		; 		individual channels.
		;
		asl 	a 							; shift into position
		asl 	a
		asl 	a
		asl 	a
		asl 	a
		ora 	#$9F 						; write register attenuation $F
		jsr 	SNDWritePorts
		rts

; ************************************************************************************************
;
;									Write byte to left and right SN76489
;
; ************************************************************************************************

SNDWritePorts:
		phx 								; save X
		ldx 	1 							; save I/O status
		stz 	1 							; access I/O page 0
		sta 	$D600 						; write to both 
		sta 	$D610
		stx 	1 							; restore I/O 
		plx 								; restore X
		rts

		.send code

; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************
