; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		bytes.asm
;		Purpose:	Push/Pull single bytes on the stack
;		Created:	5th October 2022
;		Reviewed: 	
;		Author:		Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

		.section code

; ************************************************************************************************
;
;								Push A on the BASIC stack
;
; ************************************************************************************************

StackPushByte:
		pha 								; save byte
		lda 	BasicStack
		bne 	_SPBNoBorrow
		dec 	BasicStack+1
		pha
		lda 	BasicStack+1
		cmp 	#BasicStackBase >> 8
		bcc 	_SPBMemory
_SPBNoBorrow:
		dec 	BasicStack
		pla 								; get back and write
		sta 	(BasicStack)
		rts				

_SPBMemory:
		.error_stack
		
; ************************************************************************************************
;
;								Pop A off the BASIC stack
;
; ************************************************************************************************				

StackPopByte:
		lda 	(BasicStack)
		inc 	BasicStack
		bne 	_SPBNoCarry
		inc 	BasicStack+1
_SPBNoCarry:
		rts
					
		.send code

; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************
