; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		load.asm
;		Purpose:	LOAD command
;		Created:	30th December 2022
;		Reviewed: 	No
;		Author:		Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

; ************************************************************************************************
;
;									LOAD a Basic file
;
; ************************************************************************************************

		.section code

Command_Load: ;; [LOAD]
		jsr 	EvaluateString 				; file name to load
		ldx 	zTemp0+1					; zTemp0 -> XA
		lda 	zTemp0 
		jsr 	KNLOpenFileRead 			; open file for reading
		bcs 	_CLDriveNotFound 			; drive not found (apparently)

_CLLoop:
		jsr 	KNLReadByte		
		bcs 	_CLExit
		jsr 	EXTPrintCharacter
		bra 	_CLLoop
_CLExit:				
		jmp 	WarmStart

_CLDriveNotFound:
		.error_drive

		.send code

; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************
